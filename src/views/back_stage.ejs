<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>后台管理</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
        <meta content="Coderthemes" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link rel="stylesheet" href="/stylesheets/style.css">
        <!-- App favicon -->
        <link rel="shortcut icon" href="/assets/images/favicon.ico">

        <!-- App css -->
        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/assets/css/icons.css" rel="stylesheet" type="text/css" />
        <link href="/assets/css/style.css" rel="stylesheet" type="text/css" />

        <script src="/assets/js/modernizr.min.js"></script>
        <!-- Sweet Alert css -->
        <link href="/plugins/sweet-alert/sweetalert2.min.css" rel="stylesheet" type="text/css" />
        <!--Footable-->
        <link href="/plugins/footable/css/footable.core.css" rel="stylesheet">
    </head>

    <body>

        <!-- Navigation Bar-->
        <header id="topnav">
            <div class="topbar-main">
                <div class="container-fluid">
                    <!-- Logo container-->
                    <div class="logo">
                        <a href="/" class="logo">
                            <span class="logo-large">后台管理</span>
                        </a> 
                    </div>
                    <!-- End Logo container-->


                    <div class="menu-extras topbar-custom">

                        <ul class="list-unstyled topbar-right-menu float-right mb-0">

                            
                        </ul>
                    </div>
                    <!-- end menu-extras -->

                    <div class="clearfix"></div>

                </div> <!-- end container -->
            </div>
            <!-- end topbar-main -->

            <div class="navbar-custom">
                <div class="container-fluid">
                    <div id="navigation">
                        <!-- Navigation Menu-->
                        <form action="">
                            
                        </form>
                        <!-- End navigation menu -->
                    </div> <!-- end #navigation -->
                </div> <!-- end container -->
            </div> <!-- end navbar-custom -->
        </header>
        <!-- End Navigation Bar-->


        <div class="wrapper">
            <div class="container-fluid">
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card-box" style="min-height: 300px;">
                            <!-- Left sidebar -->
                            <div class="inbox-leftbar">
                                <div class="mail-list">
                                    <a href="#" class="list-group-item border-0 manage-menu active" _target="user"><i class="mdi mdi-inbox font-18 align-middle mr-2"></i>用户管理</a>
                                    <a href="#" class="list-group-item border-0 manage-menu" _target="goods"><i class="mdi mdi-star font-18 align-middle mr-2"></i>商品管理</a>
                                    <a href="#" class="list-group-item border-0 manage-menu" _target="ad"><i class="mdi mdi-file-document-box font-18 align-middle mr-2"></i>广告栏管理</a>
                                </div>
                            </div>
                            <div class="inbox-rightbar">
                                <div role="toolbar">
                                    <div id="table_container" class="ml-5">
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- end container -->
        </div>
        <!-- end wrapper -->


        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        这里是页脚
                    </div>
                </div>
            </div>
        </footer>
        <!-- End Footer -->


        <!-- jQuery  -->
        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/popper.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>
        <script src="/assets/js/waves.js"></script>
        <script src="/assets/js/jquery.slimscroll.js"></script>

        <!-- App js -->
        <script src="/assets/js/jquery.core.js"></script>
        <script src="/assets/js/jquery.app.js"></script>
        <!-- getVerificationCode -->
        <script src="/javascripts/verificationCode.js"></script>
        <!-- Sweet Alert Js  -->
        <script src="/plugins/sweet-alert/sweetalert2.min.js"></script>
        <script src="/assets/pages/jquery.sweet-alert.init.js"></script>
        <script src="/assets/js/modernizr.min.js"></script>
        <!--FooTable-->
        <script src="/plugins/footable/js/footable.all.min.js"></script>
        <!--FooTable Example-->
        <script src="/assets/pages/jquery.footable.js"></script>
        <script>
            $(document).ready(() => {
                $('.manage-menu').click(function () {
                    $(this).addClass("active");
                    $(this).siblings().removeClass("active");
                    let target = $(this).attr('_target');
                    switch(target){
                        case 'user':
                            $('#table_container').empty();
                            $('#table_container').html('\
                            <h4 class="m-t-0 header-title" id="ms_title">用户管理</h4>\
                                <table class="table table-colored m-b-0 toggle-arrow-tiny" data-page-size="7" data-filter="#filter">\
                                    <thead>\
                                    </thead>\
                                    <tbody>\
                                    </tbody>\
                                    <tfoot>\
                                        <tr class="active">\
                                            <td colspan="5">\
                                                <div class="text-right">\
                                                    <ul class="pagination pagination-split justify-content-end footable-pagination m-t-10 m-b-0"></ul>\
                                                </div>\
                                            </td>\
                                        </tr>\
                                    </tfoot>\
                                </table>\
                            ')
                            // $('#ms_title').html('用户管理');
                            $('.table').find('thead').html(
                                '<tr>\
                                    <th data-toggle="true"> 用户名 </th>\
                                    <th data-hide="phone"> 昵称 </th>\
                                    <th> 用户权限 </th>\
                                    <th> 用户状态 </th>\
                                    <th data-sort-ignore="true"> 操作 </th>\
                                    <th data-hide="all"> id </th>\
                                    <th data-hide="all"> 注册时间 </th>\
                                </tr>'
                            );
                            var tbody_html = "";
                            //测试用data 
                            data = [
                                {username: 'abcdef1', nickName: '用户1', isBanned: false, _id: '123456789', dateOfRegistration: '2018-09-09 20:20', privilege: 'admin'},
                                {username: 'abcdef2', nickName: '用户2', isBanned: false, _id: '123456789', dateOfRegistration: '2018-09-09 20:20'},
                                {username: 'abcdef3', nickName: '用户3', isBanned: true, _id: '123456789', dateOfRegistration: '2018-09-09 20:20'},
                                {username: 'abcdef4', nickName: '用户4', isBanned: false, _id: '123456789', dateOfRegistration: '2018-09-09 20:20'},
                                {username: 'abcdef5', nickName: '用户5', isBanned: false, _id: '123456789', dateOfRegistration: '2018-09-09 20:20'},
                                {username: 'abcdef6', nickName: '用户6', isBanned: true, _id: '123456789', dateOfRegistration: '2018-09-09 20:20'},
                                {username: 'abcdef7', nickName: '用户7', isBanned: false, _id: '123456789', dateOfRegistration: '2018-09-09 20:20', privilege: 'admin'},
                                {username: 'abcdef8', nickName: '用户8', isBanned: true, _id: '123456789', dateOfRegistration: '2018-09-09 20:20'},
                                {username: 'abcdef9', nickName: '用户9', isBanned: false, _id: '123456789', dateOfRegistration: '2018-09-09 20:20'}
                            ]
                            for(i = 0, len = data.length; i < len; i++){
                                tbody_html += '\
                                    <tr>\
                                        <td>' + data[i].username + '</td>\
                                        <td>' + data[i].nickName + '</td>\
                                        <td>' + (data[i].privilege=='admin'?'管理员':'普通用户') + '</td>\
                                        <td>' + (data[i].isBanned?'<span class="badge label-table badge-danger">封号中</span>':'<span class="badge label-table badge-success">正常</span>') + '</td>\
                                        <td _id="' + data[i]._id + '">' +
                                                (data[i].isBanned?'<button class="btn btn-sm btn-outline-success waves-light waves-effect mr-2" _method="user_forbid"">解封</button>':'<button class="btn btn-sm btn-outline-danger waves-light waves-effect mr-2" _method="user_forbid" onclick="operate(this)">封号</button>')+
                                                '<button class="btn btn-sm btn-outline-info waves-light waves-effect mr-2" _method="user_admin"">发送消息</button>' +
                                                '<button class="btn btn-sm btn-outline-danger waves-light waves-effect mr-2" _method="user_admin"">删除用户</button>' +
                                                '<a target="view_frame" class="btn btn-sm btn-outline-purple waves-light waves-effect" href="/users/' + data[i].username + '">前往ta的主页</a>' + 
                                        '</td>\
                                        <td>' + data[i]._id + '</td>\
                                        <td>' + data[i].dateOfRegistration + '</td>\
                                    </tr>\
                                '
                            }
                            $('.table').find('tbody').html(tbody_html).trigger('footable_redraw');
                            setTimeout(function(){
                                $('.table').footable();
                            }, 100);
                            break;
                        case 'articles':
                            
                            break;
                        case 'treehole':
                            
                            break;  
                    }
                
                })
            })
            window.onresize = ()=>{
                
            }
        </script>
    </body>
</html>